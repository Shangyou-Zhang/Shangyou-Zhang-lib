# 1. 字符数组定义

字符数组用于存储字符串。C 语言中的字符串实际上是以 `\0`（空字符）结尾的字符数组。定义一个字符数组时，你需要为它分配足够的内存来存储字符串及其结束符。

```c
char str[100]; // 定义一个可以存储最多 99 个字符的字符数组，留出 1 个位置存储字符串结束符 '\0'
char arr[]{'hello'}
```

# 2. `scanf` 读取字符串

`scanf` 是 C 语言的标准输入函数，它可以用来从标准输入（键盘）读取字符串。对于字符串，通常使用格式符 `%s`。

#### `scanf` 使用 `%s` 格式符时的特点：

- `scanf("%s", str);` 会读取一串连续的字符，直到遇到空白字符（如空格、制表符、换行符）为止。`数组中存储了起始地址，不需要取地址`
- `scanf` 会自动在读取的字符串末尾加上空字符 `\0` 来标识字符串结束。
- 它不会读取带有空格的字符串，空格作为分隔符结束字符串的输入。

```c
#include <stdio.h>

int main() {
    char str[100];
    printf("请输入一个字符串：");
    scanf("%s", str); // 读取字符串，遇到空格、换行符等停止
    printf("你输入的字符串是：%s\n", str);
    return 0;
}
```

# 3. 注意事项：

- **缓冲区溢出**：如果输入的字符串超过字符数组的大小，会导致缓冲区溢出，可能覆盖其他内存区域，产生未定义行为。为防止缓冲区溢出，可以使用 `scanf` 的长度限制，例如 `%99s` 来限制最大输入字符数。

```c
scanf("%99s", str); // 限制读取字符的长度为 99，避免溢出
```

- **空格和换行符**：`scanf("%s", str);` 会忽略空格和换行符，在输入中遇到这些字符时会停止读取。如果你需要读取带有空格的字符串，`scanf` 不适用。

# 4. `fgets` 读取带空格的字符串

`fgets` 是一个更强大的读取函数，它可以读取整行，包括空格和换行符。

```c
#include <stdio.h>

int main() {
    char str[100];
    printf("请输入一个字符串：");
    fgets(str, sizeof(str), stdin); // 读取包含空格的字符串
    printf("你输入的字符串是：%s\n", str);
    return 0;
}
```

- `fgets` 的第一个参数是字符数组，第二个参数是最大读取字符数，第三个参数是输入流 `stdin`。
- `fgets` 会读取整行字符，直到遇到换行符或者读取到指定的最大字符数为止，并且会保留换行符。如果不希望保留换行符，可以手动去掉它。

```c
str[strcspn(str, "\n")] = 0; // 去掉末尾的换行符
```

# 5. 字符串与数组的关系

在 C 语言中，字符串是字符数组，但字符数组不一定是字符串。一个字符数组必须以 `\0` 结尾才能被认为是字符串。

```c
char str[] = "Hello"; // 字符串 "Hello" 会自动加上结束符 '\0'
```

`str` 在内存中的表示为：`{'H', 'e', 'l', 'l', 'o', '\0'}`。

如果你用字符数组手动填充字符串，记得手动加上 `\0` 作为结束符。

```c
char str[6];
str[0] = 'H';
str[1] = 'e';
str[2] = 'l';
str[3] = 'l';
str[4] = 'o';
str[5] = '\0';  // 手动添加结束符
```

# 6. `scanf` 与 `fgets` 比较

|特性|`scanf`|`fgets`|
|---|---|---|
|读取方式|直到遇到空白字符（空格、换行符等）为止|读取整行，包括空格和换行符|
|是否跳过空白字符|跳过空白字符|保留空白字符和换行符|
|读取终止符|遇到空格、换行符等停止|到达最大字符数或换行符停止|
|缓冲区溢出|容易出现溢出|不易溢出，设定了最大读取长度|

# 7. 其他注意事项

- **字符数组的大小**：`scanf` 和 `fgets` 读取数据时，都应确保字符数组有足够的空间存储输入的字符串。如果字符数组太小，可能导致缓冲区溢出，影响程序的安全性。
    
    ```c
    char str[10];
    fgets(str, sizeof(str), stdin); // 如果输入的字符串超过 9 个字符，程序会自动终止读取
    ```
    
- **字符串的结束符 `\0`**：`scanf` 会自动为读取的字符串加上 `\0`，但是如果使用 `fgets` 读取时，换行符也会被包括在内（如果读取到了换行符），因此需要手动去掉它。
    

```c
fgets(str, sizeof(str), stdin);
str[strcspn(str, "\n")] = '\0'; // 去掉换行符
```
